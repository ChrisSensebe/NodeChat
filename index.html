<!DOCTYPE html>
<html>
	<head>
		<title>Node Chat</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		<link rel="stylesheet" href="style.css">
	</head>

	<body>
		<div class="container-fluid">
			<div class="row">
				<div class="col-md-12 page-header">
					<h1>Node Chat</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-md-4">
					<form action="" id="formPseudo">
						<div class="form-group">
							<label for="pseudo">Votre pseudo</label>
							<input type="text" class="form-control" id="pseudo">
						</div>
						<div class="form-group">
							<button class="btn btn-default">Valider</button>
						</div>
					</form>
				</div>
			</div>
			<div class="row ">
				<col-md-12>
					<ul id="messages"></ul>
				</col-md-12>
			</div>
			<div class="row">
				<div class="col-md-12">
					<form action="" id="formMessage">
						<div class="form-group">
							<label for="">Message</label>
							<input type="text" class="form-control" id="message">
						</div>
						<div class="form-group">
							<button class="btn btn-default">Envoyer</button>
						</div>
					</form>
				</div>
			</div>
		</div>
		<script src="/socket.io/socket.io.js"></script>
		<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<script>
			var socket = io();
			var pseudo;

			$('#formPseudo').submit(function(){
				pseudo = $('#pseudo').val();
				$('#formMessage').show();
				$('#formPseudo').hide();
				return false;
			});

			$('#formMessage').submit(function(){
				socket.emit('chat message', [pseudo,$('#message').val()]);
				$('#message').val('');
				return false;
			});

			socket.on('chat message', function(message){
				$('#messages').append($('<li>').text(message[0] + ' : ' + message[1]))
			});
		</script>
	</body>
</html>